<div *ngIf="showModal" class="fixed top-0 inset-x-0 px-4 pb-6 sm:inset-0 sm:p-0 sm:flex sm:items-center sm:justify-center z-1000">
    
    <div class="fixed inset-0 transition-opacity" *ngIf="showModal">
        <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
    </div>

    <div *ngIf="showModal" class="bg-white rounded-lg px-4 pt-5 pb-4 overflow-hidden shadow-xl transform transition-all sm:max-w-sm sm:w-full sm:p-6" role="dialog" aria-modal="true">
        
        <div>
            <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full">
                <span *ngIf="notCancelled; else stop">
                    <i class="fas fa-cog fa-spin fa-3x"></i>
                </span>
                <ng-template #stop>
                    <i class="fas fa-cog fa-3x"></i>
                </ng-template>
            </div>
            <div class="mt-3 text-center sm:mt-5">
                <h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-headline">
                    Retrieving Observations
                </h3>
                <div class="mt-2">
                    <p class="mt-1 text-3xl leading-9 font-semibold text-gray-900">
                        {{ obsTally }}
                    </p>
                    <p class="mt-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium leading-4 bg-green-100 text-green-800" *ngIf="obsTally > 4000 && obsTally < 7999">Don't worry we can handle this...</p>
                    <p class="mt-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium leading-4 bg-teal-100 text-teal-800" *ngIf="obsTally > 8000 && obsTally < 12000">Okay, this is quite a lot...</p>
                    <p class="mt-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium leading-4 bg-orange-100 text-orange-800" *ngIf="obsTally > 11999 && obsTally < 14999">Are you sure you need this many observations...</p>
                    <p class="mt-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium leading-4 bg-yellow-100 text-yellow-800" *ngIf="obsTally > 15000 && obsTally < 19999">This is starting to take a while...</p>
                    <p class="mt-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium leading-4 bg-pink-100 text-pink-800" *ngIf="obsTally > 20000">Come on Dave, be serious...</p>
                </div>
            </div>
        </div>
        <div class="mt-5 sm:mt-6">
            <span class="flex w-full rounded-md shadow-sm">
                <button type="button" (click)="cancel()" class="inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-indigo-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo transition ease-in-out duration-150 sm:text-sm sm:leading-5" [disabled]="!notCancelled">
                    <span *ngIf="notCancelled; else cancelled">Cancel</span>
                    <ng-template #cancelled>
                        Cancelling...
                    </ng-template>
                </button>
            </span>
        </div>

    </div>
</div>